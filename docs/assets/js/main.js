"use strict";const buttonSearch=document.querySelector(".button-search"),cocktailssearch=document.querySelector(".cocktailssearch"),buttonReset=document.querySelector(".button-reset"),favoritesHtml=document.querySelector(".favorites");function handleClickSearch(e){e.preventDefault();const t=document.querySelector(".input").value;fetch("https://thecocktaildb.com/api/json/v1/1/search.php?s="+t).then((function(e){return e.json()})).then(e=>{const t=e.drinks;null===e.drinks?cocktailssearch.innerHTML="El coctel buscado no existe":(localStorage.setItem("drinkslocal",JSON.stringify(t)),buildCoctails())})}function buildCoctails(){const e=JSON.parse(localStorage.getItem("drinkslocal"));let t="";for(const c of e){const e=c.strDrink,l=c.strDrinkThumb;t+='<li class="listsearch">',t+=`<div class="cocktails" id="${c.idDrink}">`,t+=`<h2>${e}</h2>`,t+=""===l?'<img class="image" src="https://via.placeholder.com/210x295/ffffff/666666/?text=C%C3%B3ctel">':`<img class="image" src="${l}">`,t+="</div>",t+="</li>"}cocktailssearch.innerHTML=t,handleClickCocktails()}function handleClickCocktails(){const e=document.querySelectorAll(".cocktails");for(const t of e)t.addEventListener("click",addFavorite)}function addFavorite(e){const t=JSON.parse(localStorage.getItem("drinkslocal")),c=document.querySelector(".favorites"),l=e.currentTarget.id,i=t.find(e=>e.idDrink===l);let r=JSON.parse(localStorage.getItem("drinkslocalFav"));null===r&&(r=[]);if(-1===r.findIndex(e=>e.idDrink===l)){r.push(i),localStorage.setItem("drinkslocalFav",JSON.stringify(r));let e="";const t=i.strDrink,l=i.strDrinkThumb,a=i.idDrink;e+='<li class="favorites">',e+='<div class="cocktailsfavorites">',e+=`<h2>${t}</h2>`,e+='<div class="favimage">',e+=`<img class="image" src="${l}">`,e+=`<p class="selecdelete" id="fav-${a}">x</p>`,e+="</div>",e+="</div>",e+="</li>",c.innerHTML+=e,colorSelecFav(a),handleClickDelete()}}function colorSelecFav(e){document.getElementById(e).classList.add("selecfavo")}function handleClickDelete(){const e=document.querySelectorAll(".selecdelete");for(const t of e)t.addEventListener("click",deleteFavorite)}function deleteFavorite(e){let t=e.currentTarget.id.split("-")[1];const c=JSON.parse(localStorage.getItem("drinkslocalFav")),l=c.findIndex(e=>e.idDrink===t);c.splice(l,1),localStorage.setItem("drinkslocalFav",JSON.stringify(c));const i=document.querySelector(".favorites");i.innerHTML="";let r="";for(const e of c){r+='<li class="favorites">',r+='<div class="cocktailsfavorites">',r+=`<h2>${e.strDrink}</h2>`,r+='<div class="favimage">',r+=`<img class="image" src="${e.strDrinkThumb}">`,r+=`<p class="selecdelete" id="fav-${e.idDrink}">x</p>`,r+="</div>",r+="</div>",r+="</li>",i.innerHTML=r}handleClickDelete(),deleteBorderSearch(t)}function deleteBorderSearch(e){document.getElementById(e).classList.remove("selecfavo")}function clearSearch(){localStorage.removeItem("drinkslocal"),localStorage.removeItem("drinkslocalFav"),favoritesHtml.innerHTML="",cocktailssearch.innerHTML=""}buttonSearch.addEventListener("click",handleClickSearch),buttonReset.addEventListener("click",clearSearch),clearSearch();